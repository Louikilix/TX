<body style=" background-color: #171515; overflow: hidden;">
    
    <div style="font-size: 30px; color: #DC143C">
        <% if flash[:error] %>
            <%= flash[:error] %>
        <% end %>
    </div>
    <br>
    <p style="text-align: center;"><span class="Title" style="font-size: 22px">  Séléctionnez une image qui vous insipire à propos de l'écriture...</span></p>
    <br>
    <p style="text-align: center;"><span class="Title" style="font-size: 22px">  Select an image that inspires you about writing....</span></p>
    <br>
    <br>
    <br>
    <div class = "ouf">
        <% var = 0 %>
        <% @randomImage.each do |writing_image| %>
            <% if var == 0 %>
                    <div class ="cercleHome" style = "display : flex;"> 
                    <%= link_to (image_tag (writing_image.image), class: "img-responsive", :size => "390x270"), new_writing_definition_path(image: writing_image.id) %>
                </div> 
            <% else %>  
                <div class ="cercleHome" style = "display : none;"> 
                    <%= link_to (image_tag (writing_image.image), class: "img-responsive", :size => "390x270"), new_writing_definition_path(image: writing_image.id) %>
                </div> 
            <%end%>
            <% var += 1 %>
            <% if var == 6 %>
                <% break %>
            <% end %>   
        <%end%>
    </div>
    <br>
    <br>
    <form action=<%= home_index_path %> align="right" style="font-size: 30px; font-family: 'Lucida Console', 'Courier New', monospace; margin-right: 80px;margin-bottom:10px; z-index:200">
        <input style="z-index: 200;" type="submit" value="Collection" />
    </form>
<div class= "splash">
        <div class="fade-in">
             Écrire c'est... 
         </div>
    </div>
</body>
<script>
    function sleep(milliseconds) {
        const date = Date.now();
        let currentDate = null;
        do {
            currentDate = Date.now();
        } while (currentDate - date < milliseconds);
    }
    function getRandomInt(max) {
        return Math.floor(Math.random() * max);
    }

    var slide = document.getElementsByClassName("cercleHome");
    $( "div" ).mousemove(function(event) {
        imageCount = slide.length;
        n = getRandomInt(imageCount)
        for(let i=0;i<imageCount;i++){
            if (i==n){
                slide[i].style.display = 'flex';
            }else{
                slide[i].style.display = 'none';
            }

        }
        sleep(50)
   })
</script>
<script>
    function randomIntFromInterval(min, max) { // min and max included 
        return Math.floor(Math.random() * (max - min + 1) + min)
    }

    var intervalId = window.setInterval(function(){
    
        /// call your function here

        var fullWidth = window.innerWidth;
        var fullHeight = window.innerHeight;
        const font = ["Times New Roman", "Georgia", "Verdana", "Cursive Brush Script MT", "Lucida Handwriting", "Monaco", "Papyrus"];
        const randomFont = Math.floor(Math.random() * font.length);    

        const text = ["11000011100010010110001101110010011010010111001001100101","11000011100010010110001101110010011010010111001001100101","11000011100010010110001101110010011010010111001001100101", "Écrire", "..-.. -.-. .-. .. .-. .", "..-.. -.-. .-. .. .-. .", "..-.. -.-. .-. .. .-. .", "..-.. -.-. .-. .. .-. .","Écrire","Écrire","Écrire","write", "schreiben", "escribir", "scrivere", "írni", "om te skryf ", "napsat", "kirjutama", "schrijven", "escriure", "at skrive", "pisati", "para magsulat", "kirjoittaa", "escrever", "a scrie", "att skriva", "yazmak", "pisać", "ysgrifennu", "ekri", "scríobh", "biex tikteb", "rakstīt", "write", "write", "write", "schreiben", "escribir", "scrivere", "írni","ለመፃፍ", "寫", "Да пишеш", "يكتب", "写", "Mo volavola", "نوشتن", "લખવુ", "Untuk menulis", "ᑎᑎᕋᕐᓂᕐᒧᑦ", "សរសេរ", "書きます", "ಬರೆಯಲು", "לכתוב", "Жазу", "लिखने के लिए", "쓰기에", "نووسین", "Rašyti", "ਲਿਖਣ ਲਈ", "Написать", "Ina ia tusi", "எழுதுவதற்கு", "Писати", "เขียน", "لکھنا", "Để viết"];
        const randomText = Math.floor(Math.random() * text.length);    
        
        const mode = ["vertical-lr","horizontal-tb","horizontal-tb"]
        const randomMode = Math.floor(Math.random() * mode.length);

        var elem = document.createElement("div");
        var s = randomIntFromInterval(5, 50);
        var left = Math.round(Math.random() * fullWidth)
        var top = Math.round(Math.random() * fullHeight)

        elem.textContent = text[randomText];
        elem.style.position = "absolute";
        elem.style.color = "#D3D3D3";
        elem.style.opacity="0";
        elem.style.zIndex=s;
        elem.style.fontSize = s.toString()+"px";
        elem.style.writingMode = mode[randomMode];
        elem.style.fontFamily = font[randomFont];
        elem.style.overflow = "hidden";
        elem.style.left = left + "px";
        elem.style.top = top + "px";
        elem.style.width = (fullWidth - left) + "px";
        elem.style.height = (fullHeight - top) + "px";
        document.body.appendChild(elem);
        var steps = 0;
        var timer = setInterval(function() {
        steps++;
        elem.style.opacity = (s/1000) * steps;
        if(steps >= 20) {
            clearInterval(timer);
            timer = undefined;
        }
    }, 50);

    }, 700);
</script>
<script>

$(document).ready(function(){
    var splash = document.getElementsByClassName("splash");
    setTimeout(() => {
        var steps = 0;
        var timer = setInterval(function() {
        steps++;
        splash[0].style.opacity = 1-(steps/100);
        if(steps > 100) {
            clearInterval(timer);
            splash[0].remove();
        }
    }, 10);
       
    }, 2000);
    


})
</script>


